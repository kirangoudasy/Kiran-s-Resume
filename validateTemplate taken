const procResult = await tx.run(`
  DO BEGIN
    DECLARE v_status  NVARCHAR(1);
    DECLARE v_message NVARCHAR(500);

    CALL GENERIC_DATA_VALIDATOR(
      '${uuid}',
      '${MODULE_NAME}',
      '${SUB_MODULE_NAME}',
      '${LOAD_TEMPLATE}',
      v_status,
      v_message
    );

    SELECT :v_status AS STATUS, :v_message AS MESSAGE FROM DUMMY;
  END;
`);

let STATUS = 'E';
let MESSAGE = 'Unknown validation error';

if (Array.isArray(procResult) && procResult.length > 0) {
  STATUS = procResult[0].STATUS;
  MESSAGE = procResult[0].MESSAGE;
}

if (STATUS === 'E') {
  await tx.run(
    DELETE.from('com.scb.fileupload.master.Dummy')
      .where({ ID: uuid })
  );
  return { STATUS, MESSAGE };
}
