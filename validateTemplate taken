namespace com.scb.fileupload;

using {
  cuid,
  managed
} from '@sap/cds/common';

context master {

entity ReportFileStorage @(odata.stream) : cuid,managed {
  MODULE_NAME     : String(100);
  SUB_MODULE_NAME : String(100);
  LOAD_TEMPLATE   : String(100);
  FILE_NAME       : String(255);
  FILE_MIME_TYPE  : String(100);
  FILE_SIZE       : Integer;
  @Core.MediaType: 'FILE_MIME_TYPE'
  FILE_CONTENT    : LargeBinary;
  STATUS          : String(50);
  COMMENTS        : String(1000);
  JSON_DATA       : LargeString;
  LOAD_STATUS     : Boolean;
  LOAD_TYPE       : String(50);
  EXPIRY_DATE     : Date;
  ACTION_BY       : String(100);
}

entity AuditTrailReport : cuid, managed {
  REPORT     : Association to ReportFileStorage;
  MODULE_NAME     : String(100);
  SUB_MODULE_NAME : String(100);
  LOAD_TEMPLATE   : String(100);

  REQUEST_APPROVAL : Timestamp;  
  STATUS     : String(50);   // Current status snapshot
  ACTION_BY   : String(100);  // Who performed the action
  ACTION_AT   : Timestamp;    // When action was performed
}

entity LoadTable : managed {
  key ID : UUID;
  key MODULE_NAME       : String(100);
  SUB_MODULE_NAME   : String(100);
  LOAD_TEMPLATE     : String(100);
  NUMBER_OF_COLUMNS : Integer;
  DESTINATION_CONTAINER : String(100);
  STG_TABLE : String(250);
  EXPIRY_DATE     : Date;
  LOAD_TYPE : String(100);
}

entity LoadMap {
  key ID : UUID;
  MODULE_NAME         : String;
  SUB_MODULE_NAME     : String;
  LOAD_TEMPLATE       : String;
  LOAD_COLUMN_SEQ     : Integer;
  COLUMN_NAME         : String;
  COLUMN_DATATYPE     : String;
  CONSTRAINTS         : String;
}

entity ModuleContainerMap {
  key MODULE_NAME         : String;
  CONTAINER_NAME          : String;
}


entity TemplateStorage : cuid,managed {
  MODULE_NAME     : String(100);
  SUB_MODULE_NAME : String(100);
  LOAD_TEMPLATE   : String(100);
  STATUS          : String(50);
  JSON_TEMPLATE       : LargeString;
  EXPIRY_DATE     : Date;
  ACTION_BY       : String(100);
}

}
